{"ast":null,"code":"import _slicedToArray from\"/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: grid;\\n  padding: 1em;\\n  grid-template-columns: 1fr 4fr;\\n  grid-template-rows: 1000px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext,useState}from'react';import{AppContext}from'../Context';import styled from'styled-components';import moment from'moment';import{Select,Typography,Spin,DatePicker,Row,Col,Radio,Input}from'antd';import LineChart from'./LineChart';import BarEntities from'./BarEntities';import StateLevel from'./StateLevel';import group_month from'./utils';var Option=Select.Option;var MonthPicker=DatePicker.MonthPicker;var Title=Typography.Title;var AppLayout=styled.div(_templateObject());var Dashboard=function Dashboard(){var contextData=useContext(AppContext);var documents=contextData['ledger'];var entities=contextData['entities_list'];var _useState=useState(entities),_useState2=_slicedToArray(_useState,2),selectedEntities=_useState2[0],setSelectedEntities=_useState2[1];var _useState3=useState(\"notices\"),_useState4=_slicedToArray(_useState3,2),variable=_useState4[0],setVariable=_useState4[1];var dateFormat='YYYY-MM-DD';var startStr=moment('2019-01-01',dateFormat);var _useState5=useState(startStr),_useState6=_slicedToArray(_useState5,2),startDate=_useState6[0],setstartDate=_useState6[1];var now=moment().toDate();var endStr=moment(now,dateFormat);var _useState7=useState(endStr),_useState8=_slicedToArray(_useState7,2),endDate=_useState8[0],setendDate=_useState8[1];var _useState9=useState(\"time\"),_useState10=_slicedToArray(_useState9,2),radiostate=_useState10[0],setRadiostate=_useState10[1];var handleentityChange=function handleentityChange(event){if(event.length==0){setSelectedEntities(entities);}else{setSelectedEntities(event);}};function handlestartChange(date,dateString){setstartDate(date);}function handleendChange(date,dateString){setendDate(date);}var dateFormatown=\"MM/DD/YYYY\";var documents_filtered=[];documents.map(function(item){var date_check=moment(item.notice_date,dateFormatown);item.month=moment(item.notice_date).format('YYYY/MM');if(selectedEntities.includes(item.entity_name)&&date_check.isAfter(startDate)&&date_check.isBefore(endDate)){documents_filtered.push(item);}});var filtered_data=group_month(documents_filtered);var entitieschildren=[];entities.map(function(entity){entitieschildren.push(/*#__PURE__*/React.createElement(Option,{key:entity},entity));});var radioStyle={display:'block',height:'30px',lineHeight:'30px'};var onviewChange=function onviewChange(value){console.log(value);setRadiostate(value.target.value);};var selectedView;if(radiostate===\"time\"){selectedView=/*#__PURE__*/React.createElement(LineChart,{data:filtered_data,variable:variable});}else if(radiostate==\"states\"){selectedView=/*#__PURE__*/React.createElement(StateLevel,{documents:documents_filtered,variable:variable});}else{selectedView=/*#__PURE__*/React.createElement(BarEntities,{documents:documents_filtered,variable:variable});}return/*#__PURE__*/React.createElement(AppLayout,null,/*#__PURE__*/React.createElement(\"div\",{style:{padding:'20px'}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Title,{level:4},\"View\"),/*#__PURE__*/React.createElement(Radio.Group,{onChange:onviewChange,value:radiostate},/*#__PURE__*/React.createElement(Radio,{style:radioStyle,value:\"time\"},\"Time\"),/*#__PURE__*/React.createElement(Radio,{style:radioStyle,value:\"states\"},\"States\"),/*#__PURE__*/React.createElement(Radio,{style:radioStyle,value:\"entities\"},\"Entities\"))),/*#__PURE__*/React.createElement(Title,{level:4},\"Selection criteria\"),/*#__PURE__*/React.createElement(\"p\",null,\"Variable:\"),/*#__PURE__*/React.createElement(Select,{style:{width:300},defaultValue:variable,onChange:function onChange(event){return setVariable(event);}},/*#__PURE__*/React.createElement(Option,{value:\"dollar\"},\"Dollar value \"),/*#__PURE__*/React.createElement(Option,{value:\"notices\"},\"Number of notices\")),/*#__PURE__*/React.createElement(\"div\",{style:{paddingTop:'1em'}},/*#__PURE__*/React.createElement(Row,{gutter:10},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"p\",null,\"Starting date\"),/*#__PURE__*/React.createElement(MonthPicker,{defaultValue:startStr,onChange:handlestartChange})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"p\",null,\"Ending date:\"),/*#__PURE__*/React.createElement(MonthPicker,{style:{float:'right'},defaultValue:endDate,onChange:handleendChange}))))),/*#__PURE__*/React.createElement(\"div\",{style:{padding:'20px',marginLeft:'20px'}},selectedView));};export default Dashboard;","map":{"version":3,"sources":["/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/src/Components/DashboardB/Dashboard.js"],"names":["React","useContext","useState","AppContext","styled","moment","Select","Typography","Spin","DatePicker","Row","Col","Radio","Input","LineChart","BarEntities","StateLevel","group_month","Option","MonthPicker","Title","AppLayout","div","Dashboard","contextData","documents","entities","selectedEntities","setSelectedEntities","variable","setVariable","dateFormat","startStr","startDate","setstartDate","now","toDate","endStr","endDate","setendDate","radiostate","setRadiostate","handleentityChange","event","length","handlestartChange","date","dateString","handleendChange","dateFormatown","documents_filtered","map","item","date_check","notice_date","month","format","includes","entity_name","isAfter","isBefore","push","filtered_data","entitieschildren","entity","radioStyle","display","height","lineHeight","onviewChange","value","console","log","target","selectedView","padding","width","paddingTop","float","marginLeft"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react';\nimport { AppContext } from '../Context';\nimport styled from 'styled-components';\nimport moment from 'moment';\n\n\nimport {Select, Typography, Spin, DatePicker, Row, Col,  Radio, Input} from 'antd';\n\n\nimport LineChart  from './LineChart'\nimport BarEntities from './BarEntities'\nimport StateLevel from './StateLevel'\n\nimport group_month from './utils'\n\nconst {Option} = Select;\nconst { MonthPicker } = DatePicker;\nconst {Title} = Typography;\n\nconst AppLayout = styled.div`\n  display: grid;\n  padding: 1em;\n  grid-template-columns: 1fr 4fr;\n  grid-template-rows: 1000px;\n`\n\nconst Dashboard = () => {\n    const contextData = useContext(AppContext)\n    const documents = contextData['ledger'];\n    const entities = contextData['entities_list']\n    \n    const [selectedEntities, setSelectedEntities] = useState(entities)\n\n    const [variable, setVariable] = useState(\"notices\")\n    const dateFormat = 'YYYY-MM-DD';\n    const startStr = moment('2019-01-01', dateFormat) \n    const [startDate, setstartDate] = useState(startStr)\n    \n    const now = moment().toDate()\n    const endStr = moment(now, dateFormat) \n    const [endDate, setendDate] = useState(endStr)\n\n    const [radiostate, setRadiostate] = useState(\"time\")\n\n      \n\n    const handleentityChange = (event) => {\n      if (event.length == 0) {\n          setSelectedEntities(entities)\n      } else {\n          setSelectedEntities(event)\n      }\n  }\n\n  function handlestartChange(date, dateString) {\n    setstartDate(date)\n  }\n\n  function handleendChange(date, dateString) {\n    setendDate(date)\n}\n\n    let dateFormatown = \"MM/DD/YYYY\"\n    \n\n    const documents_filtered = []\n    documents.map(item => {\n          let date_check = moment(item.notice_date, dateFormatown)          \n          item.month = moment(item.notice_date).format('YYYY/MM')\n          if (selectedEntities.includes(item.entity_name) && \n             date_check.isAfter(startDate) &&\n             date_check.isBefore(endDate)\n          ) {\n            documents_filtered.push(item)\n          }\n    })\n    \n    const filtered_data = group_month(documents_filtered)\n\n   \n\n\n    const entitieschildren = []\n    entities.map(entity =>{\n        entitieschildren.push(<Option key={entity}>{entity}</Option>)\n    })\n\n\n    \n\n\n    const radioStyle = {\n        display: 'block',\n        height: '30px',\n        lineHeight: '30px',\n      };\n\n\n      const onviewChange = (value) => {\n          console.log(value)\n          setRadiostate(value.target.value)\n      }\n\n\n        let selectedView;\n        if (radiostate === \"time\") {\n            selectedView = <LineChart data = {filtered_data} variable = {variable}/>\n        } else if (radiostate == \"states\") {\n            selectedView = <StateLevel documents = {documents_filtered} variable = {variable}  />\n        } else {\n            selectedView = <BarEntities documents = {documents_filtered} variable = {variable}  />\n        }\n\n\n    \n    return (\n        <AppLayout>\n            <div style ={{padding: '20px'}}>\n             <div>\n             <Title level={4}>\n                View\n            </Title>\n\n            <Radio.Group onChange={onviewChange} value={radiostate}>\n        <Radio style={radioStyle} value={\"time\"}>\n          Time\n        </Radio>\n        <Radio style={radioStyle} value={\"states\"}>\n          States\n        </Radio>\n        <Radio style={radioStyle} value={\"entities\"}>\n          Entities \n        </Radio>\n     \n      </Radio.Group>\n\n\n        \n\n                 </div>   \n            <Title level={4}>\n                Selection criteria\n            </Title>\n            <p>\n            Variable:\n            </p>\n            <Select\n             style={{ width: 300 }}\n             defaultValue={variable}\n             onChange ={event => setVariable(event)}\n             >\n                <Option value=\"dollar\">Dollar value </Option>\n                <Option value=\"notices\">Number of notices</Option>\n            </Select>\n            \n        \n            <div style = {{paddingTop: '1em'}}>\n            <Row gutter = {10}>\n                <Col>\n                <p>\n                Starting date\n                </p>\n                <MonthPicker \n            defaultValue={startStr}\n            onChange={handlestartChange}\n            />\n                </Col>\n            <Col>\n            <p>\n                Ending date:\n                </p>\n            <MonthPicker \n            style = {{float:'right'}}\n            defaultValue={endDate}\n            onChange={handleendChange}\n            />\n            </Col>\n    \n            </Row>\n            </div>\n    \n        </div>\n\n        <div style ={{padding: '20px', \n                  marginLeft: '20px'}}>\n                      {selectedView}\n            \n        </div>                \n        </AppLayout>\n\n\n        )\n    \n}\n\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}