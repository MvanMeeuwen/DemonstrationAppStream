{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: grid;\\n  padding: 2em;\\n  grid-template-columns: 1fr 1fr;\\n  grid-template-rows: 1000px;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{PureComponent}from'react';import{BarChart,Bar,Cell,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ComposedChart}from'recharts';import{groupBy,filter}from'lodash';import{Typography}from'antd';import styled from'styled-components';import'./style.css';var AppLayout=styled.div(_templateObject());var BarEntities=function BarEntities(props){var grouped_entities=groupBy(props.documents,function(n){return n.entity_name;});console.log(grouped_entities);var entities=Object.keys(grouped_entities);var arrSum=function arrSum(arr){return arr.reduce(function(a,b){return a+b;},0);};var list_of_objects=[];for(var i=0;i<entities.length;i++){var data_object={};var index=entities[i];var entity_docs=grouped_entities[index];data_object.entity_name=index;var amount_refund=[];var amount_payment=[];for(var _i=0;_i<entity_docs.length;_i++){if(entity_docs[_i].document_type==\"Payment\"){amount_payment.push(entity_docs[_i].amount);}else if(entity_docs[_i].document_type==\"Refund\"){amount_refund.push(Math.round(entity_docs[_i].amount));}}data_object.amount_payment=arrSum(amount_payment);data_object.amount_refund=arrSum(amount_refund);data_object.amount_total=data_object.amount_refund+data_object.amount_payment;data_object.nr_payments=amount_payment.length;data_object.nr_refunds=amount_refund.length;data_object.nr_announcements=entity_docs.length-amount_payment.length-amount_refund.length;list_of_objects.push(data_object);}console.log(list_of_objects);var sorted_list=list_of_objects.sort(function(a,b){return b.amount_payment-a.amount_payment;});var bar_list=[];var reduced_data=[];for(var _i2=0;_i2<8;_i2++){reduced_data.push(sorted_list[_i2]);var barelement=/*#__PURE__*/React.createElement(Bar,{dataKey:\"amount_refund\",fill:\"#8884d8\"});bar_list.push(barelement);}var unit=props.variable===\"dollar\"?\"$\":\"\";var label=props.variable===\"dollar\"?\"Dollar value\":\"Nr. of notices\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography.Title,{level:2},\"Entity-level view\"),/*#__PURE__*/React.createElement(Typography.Paragraph,null,\"Cumulative \",props.variable===\"dollar\"?\"dollar value\":\"number of notices\",\" for 8 entities\"),/*#__PURE__*/React.createElement(AppLayout,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography.Title,{level:4},\"Payments\"),/*#__PURE__*/React.createElement(ComposedChart,{layout:\"vertical\",width:450,height:700,data:reduced_data,margin:{top:5,right:30,left:50,bottom:5}},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{type:\"number\",unit:unit,label:label}),/*#__PURE__*/React.createElement(YAxis,{dataKey:\"entity_name\",type:\"category\"}),/*#__PURE__*/React.createElement(Bar,{dataKey:props.variable==\"dollar\"?\"amount_payment\":\"nr_payments\",fill:\"#91d5ff\"}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography.Title,{level:4},\"Refunds\"),/*#__PURE__*/React.createElement(ComposedChart,{layout:\"vertical\",width:450,height:700,data:reduced_data,margin:{top:5,right:30,left:50,bottom:5}},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{type:\"number\",unit:unit,label:label,width:400}),/*#__PURE__*/React.createElement(YAxis,{dataKey:\"entity_name\",type:\"category\"}),/*#__PURE__*/React.createElement(Bar,{dataKey:props.variable==\"dollar\"?\"amount_refund\":\"nr_refunds\",fill:\"#002766\"})))));};export default BarEntities;","map":{"version":3,"sources":["/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/src/Components/DashboardB/BarEntities.js"],"names":["React","PureComponent","BarChart","Bar","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ComposedChart","groupBy","filter","Typography","styled","AppLayout","div","BarEntities","props","grouped_entities","documents","n","entity_name","console","log","entities","Object","keys","arrSum","arr","reduce","a","b","list_of_objects","i","length","data_object","index","entity_docs","amount_refund","amount_payment","document_type","push","amount","Math","round","amount_total","nr_payments","nr_refunds","nr_announcements","sorted_list","sort","bar_list","reduced_data","barelement","unit","variable","label","top","right","left","bottom"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport {\n  BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ComposedChart,\n} from 'recharts';\n\nimport {groupBy, filter} from 'lodash';\nimport { Typography } from 'antd';\nimport styled from 'styled-components';\nimport './style.css'\n\n\nconst AppLayout = styled.div`\n  display: grid;\n  padding: 2em;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1000px;\n` \n\n\n\n\nconst BarEntities = (props) => {\n    \n      \n        var grouped_entities = groupBy(props.documents, function(n) {\n          return n.entity_name;\n        })\n\n        console.log(grouped_entities)\n\n        let entities = Object.keys(grouped_entities);\n        \n      \n        const arrSum = arr => arr.reduce((a,b) => a + b, 0);\n        const list_of_objects = [];\n        for(let i = 0; i < entities.length; i++) {\n            const data_object = {};\n            let index = entities[i];\n            let entity_docs = grouped_entities[index];\n            data_object.entity_name = index\n            let amount_refund = []\n            let amount_payment = []\n            for (let i = 0; i < entity_docs.length; i++) {\n                if (entity_docs[i].document_type == \"Payment\") {\n                    amount_payment.push(entity_docs[i].amount)\n                    \n                  } else if (entity_docs[i].document_type == \"Refund\") { \n                    amount_refund.push(Math.round(entity_docs[i].amount))\n                  }\n            }\n\n            data_object.amount_payment = arrSum(amount_payment)\n            data_object.amount_refund = arrSum(amount_refund)\n            data_object.amount_total = data_object.amount_refund + data_object.amount_payment\n            data_object.nr_payments = amount_payment.length\n            data_object.nr_refunds = amount_refund.length\n            data_object.nr_announcements = entity_docs.length - amount_payment.length - amount_refund.length\n\n\n\n\n            list_of_objects.push(data_object)\n\n\n\n\n        }\n        console.log(list_of_objects)\n\n        const sorted_list = list_of_objects.sort((a, b) => (b.amount_payment - a.amount_payment))\n\n\n        const bar_list = []\n        const reduced_data = []\n        for (let i = 0; i < 8; i++) {\n            reduced_data.push(sorted_list[i])\n            let barelement = <Bar dataKey=\"amount_refund\" fill=\"#8884d8\" />;\n            bar_list.push(barelement)\n        }\n\n        \n        let unit = props.variable === \"dollar\" ? \"$\" : \"\"\n        let label = props.variable === \"dollar\" ? \"Dollar value\" : \"Nr. of notices\"\n    return <>\n\n<Typography.Title level = {2} >\n          Entity-level view\n        </Typography.Title>\n        <Typography.Paragraph>\n          Cumulative {props.variable === \"dollar\"? \"dollar value\" : \"number of notices\"} for 8 entities\n        </Typography.Paragraph>\n    <AppLayout>\n      \n      \n      <div>\n      <Typography.Title level = {4} >\n          Payments\n        </Typography.Title>\n        <ComposedChart\n        layout = 'vertical'\n        width={450}\n        height={700}\n        data = {reduced_data}\n        margin={{\n          top: 5, right: 30, left: 50, bottom: 5,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis type=\"number\" unit = {unit} label = {label} />\n        <YAxis dataKey=\"entity_name\" type=\"category\"/>\n        <Bar dataKey= {props.variable == \"dollar\" ? \"amount_payment\" : \"nr_payments\"} fill=\"#91d5ff\" />\n      </ComposedChart>\n      </div>\n\n      <div>\n        <Typography.Title level = {4} >\n          Refunds\n        </Typography.Title>\n        <ComposedChart\n        layout = 'vertical'\n        width={450}\n        height={700}\n        data = {reduced_data}\n        margin={{\n          top: 5, right: 30, left: 50, bottom: 5,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis type=\"number\" unit = {unit} label = {label} width = {400 } />\n        <YAxis dataKey=\"entity_name\" type=\"category\"/>\n        <Bar dataKey={props.variable == \"dollar\" ? \"amount_refund\" : \"nr_refunds\"}  fill=\"#002766\" />\n      </ComposedChart>\n      </div>\n\n      \n\n      </AppLayout>\n    </>\n}\n\n\nexport default BarEntities;"]},"metadata":{},"sourceType":"module"}