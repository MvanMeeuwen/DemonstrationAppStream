{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Image = function (_React$Component) {\n  _inherits(Image, _React$Component);\n\n  function Image(props) {\n    _classCallCheck(this, Image);\n\n    var _this = _possibleConstructorReturn(this, (Image.__proto__ || Object.getPrototypeOf(Image)).call(this, props));\n\n    _this.resizeImage = function () {\n      var target = _reactDom2.default.findDOMNode(_this.refs.image);\n\n      if (target === null) {\n        return;\n      }\n\n      var originalWidth = target instanceof HTMLImageElement ? target.naturalWidth : 0;\n      var originalHeight = target instanceof HTMLImageElement ? target.naturalHeight : 0;\n      var widthRatio = _this.props.width / originalWidth;\n      var heightRatio = _this.props.height / originalHeight;\n\n      if (widthRatio < heightRatio) {\n        _this.setState({\n          width: originalWidth * widthRatio,\n          height: originalHeight * widthRatio\n        });\n      } else {\n        _this.setState({\n          width: originalWidth * heightRatio,\n          height: originalHeight * heightRatio\n        });\n      }\n    };\n\n    _this.showNoImage = function () {\n      if (_this.props.noImageSrc == undefined) {\n        return;\n      }\n\n      _this.setState({\n        isNoImage: true\n      });\n    };\n\n    _this.state = {\n      width: 0,\n      height: 0,\n      isNoImage: false\n    };\n    return _this;\n  }\n\n  _createClass(Image, [{\n    key: 'render',\n    value: function render() {\n      var style = {\n        wrapper: {\n          position: 'relative',\n          width: this.props.width,\n          height: this.props.height,\n          backgroundColor: this.props.backgroundColor\n        },\n        image: {\n          position: 'absolute',\n          display: 'block',\n          left: (this.props.width - this.state.width) / 2,\n          top: (this.props.height - this.state.height) / 2,\n          width: this.state.width,\n          height: this.state.height\n        }\n      };\n      var wrapperStyle = this.props.style ? (0, _utils2.default)(this.props.style, style.wrapper) : style.wrapper;\n\n      if (this.state.isNoImage) {\n        return _react2.default.createElement('div', {\n          style: wrapperStyle\n        }, _react2.default.createElement('img', {\n          ref: 'image',\n          src: this.props.noImageSrc,\n          alt: this.props.noImageAlt || 'noimage',\n          style: style.image,\n          onLoad: this.resizeImage\n        }));\n      } else {\n        return _react2.default.createElement('div', {\n          style: wrapperStyle\n        }, _react2.default.createElement('img', {\n          ref: 'image',\n          src: this.props.src,\n          alt: this.props.alt,\n          style: style.image,\n          onLoad: this.resizeImage,\n          onError: this.showNoImage\n        }));\n      }\n    }\n  }]);\n\n  return Image;\n}(_react2.default.Component);\n\nexports.default = Image;","map":{"version":3,"sources":["../src/index.js"],"names":["Image","Component","width","height","isNoImage","target","originalWidth","originalHeight","widthRatio","heightRatio","style","wrapper","position","backgroundColor","image","display","left","top","wrapperStyle","resizeImage","showNoImage"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport m from './utils';\n\ntype Props = {\n  src: string;\n  width: number;\n  height: number;\n  alt?: string;\n  backgroundColor?: string;\n  style?: Object;\n  noImageSrc?: string;\n  noImageAlt?: string;\n}\n\ntype State = {\n  width: number;\n  height: number;\n  isNoImage: boolean;\n}\n\nexport default class Image extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      width: 0,\n      height: 0,\n      isNoImage: false,\n    };\n  }\n\n  resizeImage = () => {\n    const target = ReactDOM.findDOMNode(this.refs.image);\n    if (target === null) {\n      return;\n    }\n    const originalWidth = target instanceof HTMLImageElement ? target.naturalWidth : 0;\n    const originalHeight = target instanceof HTMLImageElement ? target.naturalHeight : 0;\n    const widthRatio = this.props.width / originalWidth;\n    const heightRatio = this.props.height / originalHeight;\n    if (widthRatio < heightRatio) {\n      this.setState({\n        width: originalWidth * widthRatio,\n        height: originalHeight * widthRatio,\n      });\n    } else {\n      this.setState({\n        width: originalWidth * heightRatio,\n        height: originalHeight * heightRatio,\n      });\n    }\n  }\n\n  showNoImage = () => {\n    if (this.props.noImageSrc == undefined) {\n      return;\n    }\n    this.setState({\n      isNoImage: true,\n    });\n  }\n\n  render() {\n    const style = {\n      wrapper: {\n        position: 'relative',\n        width: this.props.width,\n        height: this.props.height,\n        backgroundColor: this.props.backgroundColor,\n      },\n      image: {\n        position: 'absolute',\n        display: 'block',\n        left: (this.props.width - this.state.width) / 2,\n        top: (this.props.height - this.state.height) / 2,\n        width: this.state.width,\n        height: this.state.height,\n      },\n    };\n    const wrapperStyle = this.props.style ? m(this.props.style, style.wrapper) : style.wrapper;\n    if (this.state.isNoImage) {\n      return (\n        <div style={wrapperStyle}>\n          <img\n            ref=\"image\" src={this.props.noImageSrc} alt={this.props.noImageAlt || 'noimage'} style={style.image}\n            onLoad={this.resizeImage}\n          />\n        </div>\n      );\n    } else {\n      return (\n        <div style={wrapperStyle}>\n          <img\n            ref=\"image\" src={this.props.src} alt={this.props.alt} style={style.image}\n            onLoad={this.resizeImage}\n            onError={this.showNoImage}\n          />\n        </div>\n      );\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"script"}