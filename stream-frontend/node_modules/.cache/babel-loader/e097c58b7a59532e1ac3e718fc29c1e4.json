{"ast":null,"code":"import { groupBy, filter } from 'lodash';\nimport moment from 'moment';\n\nconst group_month = documents => {\n  var month_grouping = groupBy(documents, function (n) {\n    return n.month;\n  });\n  let months = Object.keys(month_grouping);\n\n  const arrSum = arr => arr.reduce((a, b) => a + b, 0);\n\n  const list_of_objects = [];\n\n  for (let i = 0; i < months.length; i++) {\n    const data_object = {};\n    let index = months[i];\n    let month_docs = month_grouping[index];\n    let amount_payment = [];\n    let amount_refund = [];\n\n    for (let i = 0; i < month_docs.length; i++) {\n      if (month_docs[i].document_type == \"Payment\") {\n        amount_payment.push(month_docs[i].amount);\n      } else if (month_docs[i].document_type == \"Refund\") {\n        amount_refund.push(Math.round(month_docs[i].amount / 0.75));\n      }\n    }\n\n    data_object.amount_payment = arrSum(amount_payment);\n    data_object.amount_refund = arrSum(amount_refund);\n    var groups = groupBy(month_docs, function (n) {\n      return n.document_type;\n    });\n    data_object.month = index;\n    data_object.refunds = groups['Refund'].length;\n    data_object.payments = groups['Payment'].length;\n    data_object.announcements = groups['Announcement'].length;\n    data_object.epoch = moment(index, \"YYYY/MM\").valueOf();\n    list_of_objects.push(data_object);\n  }\n\n  list_of_objects.sort(function (a, b) {\n    return a.epoch - b.epoch;\n  });\n  return list_of_objects;\n};\n\nexport default group_month;","map":{"version":3,"sources":["/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/src/Components/DashboardB/utils.js"],"names":["groupBy","filter","moment","group_month","documents","month_grouping","n","month","months","Object","keys","arrSum","arr","reduce","a","b","list_of_objects","i","length","data_object","index","month_docs","amount_payment","amount_refund","document_type","push","amount","Math","round","groups","refunds","payments","announcements","epoch","valueOf","sort"],"mappings":"AAAA,SAAQA,OAAR,EAAiBC,MAAjB,QAA8B,QAA9B;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,WAAW,GAAIC,SAAD,IAAe;AAC/B,MAAIC,cAAc,GAAGL,OAAO,CAACI,SAAD,EAAY,UAASE,CAAT,EAAY;AAClD,WAAOA,CAAC,CAACC,KAAT;AACD,GAF2B,CAA5B;AAKH,MAAIC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYL,cAAZ,CAAb;;AAEA,QAAMM,MAAM,GAAGC,GAAG,IAAIA,GAAG,CAACC,MAAJ,CAAW,CAACC,CAAD,EAAGC,CAAH,KAASD,CAAC,GAAGC,CAAxB,EAA2B,CAA3B,CAAtB;;AAEC,QAAMC,eAAe,GAAG,EAAxB;;AACA,OAAI,IAAIC,CAAC,GAAE,CAAX,EAAcA,CAAC,GAAET,MAAM,CAACU,MAAxB,EAAgCD,CAAC,EAAjC,EAAoC;AAChC,UAAME,WAAW,GAAG,EAApB;AACA,QAAIC,KAAK,GAAGZ,MAAM,CAACS,CAAD,CAAlB;AACA,QAAII,UAAU,GAAGhB,cAAc,CAACe,KAAD,CAA/B;AACA,QAAIE,cAAc,GAAG,EAArB;AACA,QAAIC,aAAa,GAAG,EAApB;;AACA,SAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,UAAU,CAACH,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,UAAII,UAAU,CAACJ,CAAD,CAAV,CAAcO,aAAd,IAA+B,SAAnC,EAA8C;AAC5CF,QAAAA,cAAc,CAACG,IAAf,CAAoBJ,UAAU,CAACJ,CAAD,CAAV,CAAcS,MAAlC;AAED,OAHD,MAGO,IAAIL,UAAU,CAACJ,CAAD,CAAV,CAAcO,aAAd,IAA+B,QAAnC,EAA6C;AAClDD,QAAAA,aAAa,CAACE,IAAd,CAAmBE,IAAI,CAACC,KAAL,CAAWP,UAAU,CAACJ,CAAD,CAAV,CAAcS,MAAd,GAAqB,IAAhC,CAAnB;AACD;AAEF;;AAEDP,IAAAA,WAAW,CAACG,cAAZ,GAA6BX,MAAM,CAACW,cAAD,CAAnC;AACAH,IAAAA,WAAW,CAACI,aAAZ,GAA4BZ,MAAM,CAACY,aAAD,CAAlC;AAGA,QAAIM,MAAM,GAAG7B,OAAO,CAACqB,UAAD,EAAa,UAASf,CAAT,EAAW;AACtC,aAAOA,CAAC,CAACkB,aAAT;AACL,KAFmB,CAApB;AAGAL,IAAAA,WAAW,CAACZ,KAAZ,GAAoBa,KAApB;AACAD,IAAAA,WAAW,CAACW,OAAZ,GAAsBD,MAAM,CAAC,QAAD,CAAN,CAAiBX,MAAvC;AACAC,IAAAA,WAAW,CAACY,QAAZ,GAAuBF,MAAM,CAAC,SAAD,CAAN,CAAkBX,MAAzC;AACAC,IAAAA,WAAW,CAACa,aAAZ,GAA4BH,MAAM,CAAC,cAAD,CAAN,CAAuBX,MAAnD;AACAC,IAAAA,WAAW,CAACc,KAAZ,GAAoB/B,MAAM,CAACkB,KAAD,EAAQ,SAAR,CAAN,CAAyBc,OAAzB,EAApB;AACAlB,IAAAA,eAAe,CAACS,IAAhB,CAAqBN,WAArB;AACH;;AAEDH,EAAAA,eAAe,CAACmB,IAAhB,CAAqB,UAASrB,CAAT,EAAYC,CAAZ,EAAe;AAClC,WAAOD,CAAC,CAACmB,KAAF,GAAUlB,CAAC,CAACkB,KAAnB;AACD,GAFD;AAGD,SAAOjB,eAAP;AAEA,CA/CD;;AAiDA,eAAeb,WAAf","sourcesContent":["import {groupBy, filter} from 'lodash';\nimport moment from 'moment';\n\nconst group_month = (documents) => {\n    var month_grouping = groupBy(documents, function(n) {\n      return n.month;\n    });\n\n\n let months = Object.keys(month_grouping);\n\n const arrSum = arr => arr.reduce((a,b) => a + b, 0);\n\n  const list_of_objects = [];\n  for(let i =0; i< months.length; i++){\n      const data_object = {}\n      let index = months[i]\n      let month_docs = month_grouping[index];\n      let amount_payment = []\n      let amount_refund = []\n      for (let i = 0; i < month_docs.length; i++) {\n        if (month_docs[i].document_type == \"Payment\") {\n          amount_payment.push(month_docs[i].amount)\n          \n        } else if (month_docs[i].document_type == \"Refund\") { \n          amount_refund.push(Math.round(month_docs[i].amount/0.75))\n        }\n        \n      }\n\n      data_object.amount_payment = arrSum(amount_payment)\n      data_object.amount_refund = arrSum(amount_refund)\n\n\n      var groups = groupBy(month_docs, function(n){\n            return n.document_type        \n      })\n      data_object.month = index \n      data_object.refunds = groups['Refund'].length\n      data_object.payments = groups['Payment'].length\n      data_object.announcements = groups['Announcement'].length\n      data_object.epoch = moment(index, \"YYYY/MM\").valueOf()\n      list_of_objects.push(data_object)\n  }\n  \n  list_of_objects.sort(function(a, b) {\n    return a.epoch - b.epoch;\n  })\n return list_of_objects\n\n}\n\nexport default group_month"]},"metadata":{},"sourceType":"module"}