{"ast":null,"code":"import _regeneratorRuntime from\"/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createContext}from'react';import{API}from'aws-amplify';import{groupBy}from'lodash';var AppContext=createContext();var AppProvider=function AppProvider(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var apiName,path,myInit,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:apiName='stream';path='/application_context';myInit={headers:{}};_context.next=5;return API.get(apiName,path,myInit);case 5:result=_context.sent;setData(result);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var test=function test(){if(data===null){}else{var items=data['ledger'];var state_grouping=groupBy(items,function(n){return n.state;});var states=Object.keys(state_grouping);var data_per_state=Object.values(state_grouping);var arrSum=function arrSum(arr){return arr.reduce(function(a,b){return a+b;},0);};var datalist=[];states.map(function(state){var data_object={};var amount=[];var state_data=state_grouping[state];for(var i=0;i<state_data.length;i++){amount.push(state_data[i].amount);}data_object.state=state;data_object.total_amount=arrSum(amount);data_object.nr_documents=state_data.length;var doctypes=groupBy(state_data,function(n){return n.document_type;});var types=Object.keys(doctypes);var values=Object.values(doctypes);var jsonObject={};for(var _i=0;_i<types.length;_i++){jsonObject[types[_i]]=values[_i].length;}data_object.distribution=jsonObject;datalist.push(data_object);});data.documents_grouped_state=datalist;}};test();if(data===null){return null;}return/*#__PURE__*/React.createElement(AppContext.Provider,{value:data},props.children);};export{AppContext,AppProvider};","map":{"version":3,"sources":["/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/src/Components/Context.js"],"names":["React","useState","useEffect","createContext","API","groupBy","AppContext","AppProvider","props","data","setData","fetchData","apiName","path","myInit","headers","get","result","test","items","state_grouping","n","state","states","Object","keys","data_per_state","values","arrSum","arr","reduce","a","b","datalist","map","data_object","amount","state_data","i","length","push","total_amount","nr_documents","doctypes","document_type","types","jsonObject","distribution","documents_grouped_state","children"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, createContext} from 'react';\nimport {API} from 'aws-amplify';\nimport {groupBy} from 'lodash';\n\n\nconst AppContext = createContext();\n\n\nconst AppProvider = (props) => {\n\n    const [data, setData] = useState(null)\n\n    const fetchData = async () => {\n      let apiName = 'stream';\n      let path = '/application_context'\n      let myInit = { \n          headers: {}\n      } \n      const result = await API.get(apiName, path, myInit);\n      setData(result);\n    };\n  \n    useEffect(() => {\n      fetchData();\n    }, []);\n\n    const test = () => {\n      if (data === null) {\n          \n      } else {\n        const items = data['ledger']\n        var state_grouping = groupBy(items, function(n) {\n          return n.state;\n        });\n\n        const states = Object.keys(state_grouping)\n        const data_per_state = Object.values(state_grouping)\n        const arrSum = arr => arr.reduce((a,b) => a + b, 0);\n        const datalist = [];\n        states.map(state => {\n          const data_object = {}\n          let amount = [];\n          let state_data = state_grouping[state]\n          for (let i = 0; i < state_data.length; i++) {\n            amount.push(state_data[i].amount)\n          }\n          data_object.state = state;\n          data_object.total_amount = arrSum(amount)\n          data_object.nr_documents = state_data.length\n          let doctypes = groupBy(state_data, function(n) {\n            return n.document_type\n          })\n        \n          let types = Object.keys(doctypes)\n          let values = Object.values(doctypes)\n          let jsonObject = {}\n          for (let i = 0; i < types.length; i++){\n            jsonObject[types[i]] = values[i].length\n          }\n          data_object.distribution = jsonObject\n          datalist.push(data_object)\n        })\n        data.documents_grouped_state = datalist;\n        \n      }\n    }\n    test()\n\n\n    if (data  === null) {\n        return null \n      } \n    \n    \n\n\n    return (\n\n        <AppContext.Provider value={data}>\n                {props.children}\n        </AppContext.Provider>\n    )\n\n\n}\n\nexport {AppContext, AppProvider};"]},"metadata":{},"sourceType":"module"}