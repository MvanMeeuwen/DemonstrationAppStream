{"ast":null,"code":"import { groupBy, filter } from 'lodash';\nimport moment from 'moment';\n\nconst group_month = documents => {\n  var month_grouping = groupBy(documents, function (n) {\n    return n.month;\n  });\n  let months = Object.keys(month_grouping);\n  console.log(month_grouping);\n\n  const arrSum = arr => arr.reduce((a, b) => a + b, 0);\n\n  const list_of_objects = [];\n\n  for (let i = 0; i < months.length; i++) {\n    const data_object = {};\n    let index = months[i];\n    let test = month_grouping[index];\n    let amount_payment = [];\n    let amount_refund = [];\n\n    for (let i = 0; i < test.length; i++) {\n      amount_payment.push(test[i].amount);\n    }\n\n    data_object.amount_payment = arrSum(amount_payment);\n    var groups = groupBy(test, function (n) {\n      return n.document_type;\n    });\n    data_object.month = index;\n    data_object.refunds = groups['Refund'].length;\n    data_object.payments = groups['Payment'].length;\n    data_object.announcements = groups['Announcement'].length;\n    data_object.epoch = moment(index, \"YYYY/MM\").valueOf();\n    list_of_objects.push(data_object);\n  }\n\n  list_of_objects.sort(function (a, b) {\n    return a.epoch - b.epoch;\n  });\n  return list_of_objects;\n};\n\nexport default group_month;","map":{"version":3,"sources":["/Users/maartenvanmeeuwen/Documents/stream-productie/stream-frontend/src/Components/Dashboard/utils.js"],"names":["groupBy","filter","moment","group_month","documents","month_grouping","n","month","months","Object","keys","console","log","arrSum","arr","reduce","a","b","list_of_objects","i","length","data_object","index","test","amount_payment","amount_refund","push","amount","groups","document_type","refunds","payments","announcements","epoch","valueOf","sort"],"mappings":"AAAA,SAAQA,OAAR,EAAiBC,MAAjB,QAA8B,QAA9B;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,WAAW,GAAIC,SAAD,IAAe;AAC/B,MAAIC,cAAc,GAAGL,OAAO,CAACI,SAAD,EAAY,UAASE,CAAT,EAAY;AAClD,WAAOA,CAAC,CAACC,KAAT;AACD,GAF2B,CAA5B;AAKH,MAAIC,MAAM,GAAGC,MAAM,CAACC,IAAP,CAAYL,cAAZ,CAAb;AACAM,EAAAA,OAAO,CAACC,GAAR,CAAYP,cAAZ;;AACA,QAAMQ,MAAM,GAAGC,GAAG,IAAIA,GAAG,CAACC,MAAJ,CAAW,CAACC,CAAD,EAAGC,CAAH,KAASD,CAAC,GAAGC,CAAxB,EAA2B,CAA3B,CAAtB;;AAEC,QAAMC,eAAe,GAAG,EAAxB;;AACA,OAAI,IAAIC,CAAC,GAAE,CAAX,EAAcA,CAAC,GAAEX,MAAM,CAACY,MAAxB,EAAgCD,CAAC,EAAjC,EAAoC;AAChC,UAAME,WAAW,GAAG,EAApB;AACA,QAAIC,KAAK,GAAGd,MAAM,CAACW,CAAD,CAAlB;AACA,QAAII,IAAI,GAAGlB,cAAc,CAACiB,KAAD,CAAzB;AACA,QAAIE,cAAc,GAAG,EAArB;AACA,QAAIC,aAAa,GAAG,EAApB;;AACA,SAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,IAAI,CAACH,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACpCK,MAAAA,cAAc,CAACE,IAAf,CAAoBH,IAAI,CAACJ,CAAD,CAAJ,CAAQQ,MAA5B;AACD;;AACDN,IAAAA,WAAW,CAACG,cAAZ,GAA6BX,MAAM,CAACW,cAAD,CAAnC;AAGA,QAAII,MAAM,GAAG5B,OAAO,CAACuB,IAAD,EAAO,UAASjB,CAAT,EAAW;AAChC,aAAOA,CAAC,CAACuB,aAAT;AACL,KAFmB,CAApB;AAGAR,IAAAA,WAAW,CAACd,KAAZ,GAAoBe,KAApB;AACAD,IAAAA,WAAW,CAACS,OAAZ,GAAsBF,MAAM,CAAC,QAAD,CAAN,CAAiBR,MAAvC;AACAC,IAAAA,WAAW,CAACU,QAAZ,GAAuBH,MAAM,CAAC,SAAD,CAAN,CAAkBR,MAAzC;AACAC,IAAAA,WAAW,CAACW,aAAZ,GAA4BJ,MAAM,CAAC,cAAD,CAAN,CAAuBR,MAAnD;AACAC,IAAAA,WAAW,CAACY,KAAZ,GAAoB/B,MAAM,CAACoB,KAAD,EAAQ,SAAR,CAAN,CAAyBY,OAAzB,EAApB;AACAhB,IAAAA,eAAe,CAACQ,IAAhB,CAAqBL,WAArB;AACH;;AAEDH,EAAAA,eAAe,CAACiB,IAAhB,CAAqB,UAASnB,CAAT,EAAYC,CAAZ,EAAe;AAClC,WAAOD,CAAC,CAACiB,KAAF,GAAUhB,CAAC,CAACgB,KAAnB;AACD,GAFD;AAGD,SAAOf,eAAP;AAEA,CAvCD;;AAyCA,eAAef,WAAf","sourcesContent":["import {groupBy, filter} from 'lodash';\nimport moment from 'moment';\n\nconst group_month = (documents) => {\n    var month_grouping = groupBy(documents, function(n) {\n      return n.month;\n    });\n\n\n let months = Object.keys(month_grouping);\n console.log(month_grouping)\n const arrSum = arr => arr.reduce((a,b) => a + b, 0);\n\n  const list_of_objects = [];\n  for(let i =0; i< months.length; i++){\n      const data_object = {}\n      let index = months[i]\n      let test = month_grouping[index];\n      let amount_payment = []\n      let amount_refund = []\n      for (let i = 0; i < test.length; i++) {\n        amount_payment.push(test[i].amount)\n      }\n      data_object.amount_payment = arrSum(amount_payment)\n\n\n      var groups = groupBy(test, function(n){\n            return n.document_type        \n      })\n      data_object.month = index \n      data_object.refunds = groups['Refund'].length\n      data_object.payments = groups['Payment'].length\n      data_object.announcements = groups['Announcement'].length\n      data_object.epoch = moment(index, \"YYYY/MM\").valueOf()\n      list_of_objects.push(data_object)\n  }\n  \n  list_of_objects.sort(function(a, b) {\n    return a.epoch - b.epoch;\n  })\n return list_of_objects\n\n}\n\nexport default group_month"]},"metadata":{},"sourceType":"module"}